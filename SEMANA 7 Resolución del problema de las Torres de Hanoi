using System;
using System.Collections.Generic; // Necesario para usar la clase Stack
using System.Linq; // Necesario para el método Reverse() en la visualización de la pila

public class TowersOfHanoi
{
    // Declaración de las tres torres como pilas de enteros.
    // Un entero representa el tamaño del disco (1 es el más pequeño, N es el más grande).
    private static Stack<int> towerA = new Stack<int>(); // Torre de origen (Source)
    private static Stack<int> towerB = new Stack<int>(); // Torre auxiliar (Auxiliary)
    private static Stack<int> towerC = new Stack<int>(); // Torre de destino (Destination)

    // Contador para llevar la cuenta del número de movimientos realizados.
    private static int moveCount = 0;

    // El método Main es el punto de entrada de la aplicación.
    public static void Main(string[] args)
    {
        Console.WriteLine("--- Resolución del Problema de las Torres de Hanói ---");

        // Define el número de discos para el problema. Puedes cambiar este valor.
        int numberOfDisks = 4; // Por ejemplo, 4 discos.

        // Inicializa la torre de origen (towerA) con los discos.
        // Los discos se apilan del más grande (base) al más pequeño (cima).
        for (int i = numberOfDisks; i >= 1; i--)
        {
            towerA.Push(i);
        }

        Console.WriteLine($"\nEstado inicial con {numberOfDisks} discos:");
        PrintTowers(); // Muestra el estado inicial de las torres.

        Console.WriteLine("\nIniciando la resolución...\n");

        // Llama a la función recursiva principal para resolver las Torres de Hanói.
        // Los parámetros son: número de discos, torre de origen, torre auxiliar, torre de destino,
        // y los nombres de las torres para una mejor visualización.
        SolveHanoi(numberOfDisks, towerA, towerB, towerC, 'A', 'B', 'C');

        Console.WriteLine("\n--- ¡Problema de las Torres de Hanói resuelto! ---");
        Console.WriteLine($"Total de movimientos realizados: {moveCount}");

        // Mantiene la consola abierta hasta que el usuario presione una tecla.
        Console.WriteLine("\nPresiona cualquier tecla para salir...");
        Console.ReadKey();
